# javacode_test

Это решение тестового задания для компании javacode.

## Описание

Проект представляет собой RESTful API для управления электронными кошельками. Основные функции включают:
- **Создание кошелька:** Регистрация нового кошелька с начальным балансом 0.0.
- **Операции с кошельком:** Проведение транзакций пополнения (DEPOSIT) и снятия (WITHDRAW) с проверкой достаточности средств.
- **Получение информации:** Запрос данных о кошельке, включая его баланс и уникальный идентификатор.

## Архитектура

Проект реализован с разделением ответственности по следующим модулям:

- **API (FastAPI):**  
  Эндпоинты сгруппированы в маршруты (директория `api/v1/routes`), что обеспечивает чистоту и масштабируемость кода.

- **Модели (SQLAlchemy):**  
  Определение структуры данных происходит в директории `api/v1/models`. Модель `Wallet` описывает кошелёк с уникальным идентификатором и балансом.

- **Схемы (Pydantic):**  
  Для валидации входных данных и сериализации выходных данных используются Pydantic-схемы, расположенные в `api/v1/schemas`.

- **Репозитории:**  
  В директории `api/v1/repository` содержится логика доступа к данным. Репозиторий для кошельков отвечает за выполнение транзакций, блокировку записей с помощью `SELECT ... FOR UPDATE` и обработку бизнес-логики.

- **База данных:**  
  Используется PostgreSQL в качестве СУБД. Миграции базы данных управляются с помощью Liquibase (директория `liquibase`), что позволяет поддерживать актуальную схему базы.

- **Контейнеризация:**  
  Проект упакован в Docker, а сборка и запуск осуществляются через Docker Compose (`docker-compose.yml`), что облегчает развёртывание и масштабирование приложения.

- **Тестирование:**  
  Набор тестов (директория `tests`) реализован с использованием pytest и FastAPI TestClient. Тесты покрывают основные сценарии работы с кошельками, включая создание, депозит, снятие средств и обработку ошибок.
